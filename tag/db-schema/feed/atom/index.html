<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>kmonsoor's online hub</title><link href="http://blog.kmonsoor.com/" rel="alternate"></link><link href="/tag/db-schema/feed/atom/index.html" rel="self"></link><id>http://blog.kmonsoor.com/</id><updated>2015-12-01T00:00:00+06:00</updated><entry><title>[Step-by-step][How to] Generate ER diagram from a PostgreSQL (or any) database</title><link href="http://blog.kmonsoor.com/generate-er-diagram-from-sql-database/" rel="alternate"></link><updated>2015-12-01T00:00:00+06:00</updated><author><name>Khaled Monsoor</name></author><id>tag:blog.kmonsoor.com,2014-12-18:generate-er-diagram-from-sql-database/</id><summary type="html">&lt;p&gt;When you are &amp;#8220;study&amp;#8221;-ing (for whatever reason) someone else&amp;#8217;s database, and the database has more than 20 tables, you are in trouble to understand what goes&amp;nbsp;where.&lt;/p&gt;
&lt;p&gt;Now, imagine a database with 300+ tables. It&amp;#8217;s like spaghetti, but not enjoyable. Rather,&amp;nbsp;horrific.&lt;/p&gt;
&lt;p&gt;I faced a similar challenge recently with a database of 250+ tables. Yes, i felt like in a deep sh*t. And, started looking for tools which can describe the tables in at least decent &lt;span class="caps"&gt;ER&lt;/span&gt;-diagram. If anything more, better. And, obviously free as my company is not&amp;nbsp;paying. &lt;/p&gt;
&lt;p&gt;Then, I found &lt;a href="http://schemaspy.sourceforge.net/"&gt;SchemaSpy&lt;/a&gt;, originally authored by &lt;a href="https://sites.google.com/site/johncurrier/"&gt;John Currier&lt;/a&gt;. It generate a complete in-depth &lt;span class="caps"&gt;HTML&lt;/span&gt;-based description (of course, including clickable &lt;span class="caps"&gt;ER&lt;/span&gt;-diagram) of the database, which you can then browse with your browser. My this post is on it&amp;#8217;s basic&amp;nbsp;usage.&lt;/p&gt;
&lt;p&gt;The output will be kind of like this:
&lt;img alt="schemapy output sample" src="https://googledrive.com/host/0B_IybRcQsDwaTGduUi1jR3h6aDQ/blog/schemapy_sample.png" /&gt;&lt;/p&gt;
&lt;p&gt;It is based on Java technologies, but can work its magic on most of the major database technologies. But, you would need a appropriate &lt;span class="caps"&gt;JDBC&lt;/span&gt; connector for that&amp;nbsp;database. &lt;/p&gt;
&lt;p&gt;Quote from the&amp;nbsp;author:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;SchemaSpy uses &lt;span class="caps"&gt;JDBC&lt;/span&gt;&amp;#8217;s database metadata extraction services to gather the majority of its information, but has to make vendor-specific &lt;span class="caps"&gt;SQL&lt;/span&gt; queries to gather some information such as the &lt;span class="caps"&gt;SQL&lt;/span&gt; associated with a view and the details of check&amp;nbsp;constraints.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In this post, as example, i have shown to use it with PostgreSQL. But, it&amp;#8217;s not the only one supported. You can use ot with any proper &lt;span class="caps"&gt;RDBMS&lt;/span&gt; system as long as it has a &lt;span class="caps"&gt;JDBC&lt;/span&gt;-connector. 
 Now, to use it, you need these&amp;nbsp;staffs.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;First of all&lt;/strong&gt;, your system should have &lt;strong&gt;Java runtime&lt;/strong&gt; properly installed. &lt;a href="http://java.com/en/download/manual.jsp"&gt;Download from&amp;nbsp;here.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SchemaSpy, which is a .jar file&lt;/strong&gt;. &lt;a href="http://sourceforge.net/projects/schemaspy/files/"&gt;Get it here&lt;/a&gt;. 
    At the time of writing, it was version&amp;nbsp;5.0.0.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;span class="caps"&gt;JDBC&lt;/span&gt; connector to PostgreSQL&lt;/strong&gt;. Make sure to match your PostgreSQL version. You can &lt;a href="http://jdbc.postgresql.org/download.html"&gt;download it from here&lt;/a&gt;.&lt;br /&gt;
    You can check your PostgreSQL version by executing: &lt;code&gt;SELECT version();&lt;/code&gt; query on &lt;strong&gt;&lt;em&gt;psql&lt;/em&gt;&lt;/strong&gt;&amp;nbsp;prompt.&lt;/li&gt;
&lt;li&gt;Also, SchemaSpy depends on &lt;strong&gt;GarphViz&lt;/strong&gt; to generate the &lt;span class="caps"&gt;ER&lt;/span&gt;-diagrams, so you need to be installed it on your system. Get it from&amp;nbsp;here.(http://www.graphviz.org/Download..php)&lt;/li&gt;
&lt;li&gt;And, of course make sure PostgreSQL instance running &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; serving the database you are trying to&amp;nbsp;visualize.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Quoting from the&amp;nbsp;author:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;SchemaSpy uses the dot executable from &lt;a href="http://www.graphviz.org/"&gt;Graphviz&lt;/a&gt; to generate graphical  representations of the table/view relationships. This was initially added for people who see things visually. Now the graphical representation of relationships is a fundamental feature of the&amp;nbsp;tool.  &lt;/p&gt;
&lt;p&gt;Graphviz is not required to view the output generated by SchemaSpy, but &lt;strong&gt;the dot program should be in your &lt;span class="caps"&gt;PATH&lt;/span&gt;&lt;/strong&gt; (not &lt;span class="caps"&gt;CLASSPATH&lt;/span&gt;) when  running SchemaSpy or none of the entity relationship diagrams will be generated (or use the &lt;a href="http://schemaspy.sourceforge.net/#gvparam"&gt;&lt;code&gt;-gv&lt;/code&gt;&lt;/a&gt;&amp;nbsp;option).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;For convenience, i kept the .jar files (&lt;span class="caps"&gt;JDBC&lt;/span&gt;-connector, and SchemaSpy) in my home folder.&lt;br /&gt;
Now, in my case, My &lt;span class="caps"&gt;OS&lt;/span&gt; is Linux, my &lt;span class="caps"&gt;DB&lt;/span&gt;-host address is: 127.0.0.1, running PostgreSQL-9.3 at port 5432 . So, i run the command like&amp;nbsp;this:&lt;/p&gt;
&lt;div class="codehilite" style="background: #202020"&gt;&lt;pre style="line-height: 125%"&gt;  $ java -jar ./schemaSpy_5.0.0.jar -t pgsql -host 127.0.0.1:5432 -db your_database_name \
                                    -u your_DB_user_name -p your_password -s public \
                                    -dp ./postgresql-9.3-1102.jdbc3.jar 
                                    -o output_folder
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It may take a little while, depending on the size of the schema of the database.&lt;br /&gt;
After that, you will find the output folder/directory named &lt;code&gt;output_folder&lt;/code&gt;.&lt;br /&gt;
You&amp;#8217;ll see some output when the magic is going on, like&amp;nbsp;this.&lt;/p&gt;
&lt;div class="codehilite" style="background: #202020"&gt;&lt;pre style="line-height: 125%"&gt;  Using database properties: [./schemaSpy_5.0.0.jar]/net/sourceforge/schemaspy/dbTypes/pgsql.properties 
  Gathering schema details................(6sec) 
  Writing/graphing summary......(2sec) 
  Writing/diagramming details..........................(31sec) 
  Wrote relationship details of 113 tables/views to directory &amp;#39;output&amp;#39; in 41 seconds. 

  View the results by opening output_folder/index.html
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now, start browsing the generated docs from &amp;#8220;index.html&amp;#8221; in the output folder.&lt;br /&gt;
Good luck.&amp;nbsp;:) &lt;/p&gt;</summary><category term="db"></category><category term="db-schema"></category><category term="dbms"></category><category term="diagram"></category><category term="ER-diagram"></category><category term="graphviz"></category><category term="java"></category><category term="postgresql"></category><category term="programming"></category><category term="rdbms"></category><category term="schema"></category><category term="schemaspy"></category><category term="visualization"></category></entry></feed>