<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>

    <title>  [Step-by-step][How to] Generate ER diagram from a PostgreSQL (or any) database
 | kmonsoor's online hub</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content=""/>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/bootstrap/2.3.2/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/bootstrap/2.3.2/css/bootstrap-responsive.min.css"/>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/fontawesome/4.0.3/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.0.0/magnific-popup.min.css"/>
    <link rel="stylesheet" href="http://blog.kmonsoor.com/theme/css/jquery.mglass.css"/>
    <link rel="stylesheet" href="http://blog.kmonsoor.com/theme/css/pygment-solarized-dark.css"/>
    <link rel="stylesheet" href="http://blog.kmonsoor.com/theme/css/style.css"/>

    <!-- Fonts -->
    <link href='//fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
    <link href='//fonts.googleapis.com/css?family=Istok+Web' rel='stylesheet' type='text/css'/>
    <link href='//fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'/>
      <link href='//fonts.googleapis.com/css?family=Expletus+Sans' rel='stylesheet' type='text/css'>


    <link rel="icon" href="http://blog.kmonsoor.com/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="http://blog.kmonsoor.com/favicon.ico" type="image/x-icon">

    <!-- Feeds -->
      <link href="/feed/atom/index.html" type="application/atom+xml" rel="alternate" title="kmonsoor&#39;s online hub Atom Feed"/>
      <link href="/feed/index.html" type="application/rss+xml" rel="alternate" title="kmonsoor&#39;s online hub RSS Feed"/>
      <link href="/category/tech/feed/atom/index.html" type="application/atom+xml" rel="alternate" title="kmonsoor&#39;s online hub Categories Atom Feed"/>
      <link href="/category/tech/feed/index.html" type="application/rss+xml" rel="alternate" title="kmonsoor&#39;s online hub Categories RSS Feed"/>


  </head>

  <body>
    <div class="container">

      <header>
        <div class="page-header">
            <a href="http://blog.kmonsoor.com" class="avatar-container">
              <div class="avatar ">
                <div class="side"><img src="/logo.png"/></div>
              </div>
            </a>
          <h1><a href="http://blog.kmonsoor.com">kmonsoor's online hub</a> <small>my internet corner</small></h1>
        </div>

        <div class="navbar">
          <div class="navbar-inner">
            <a class="brand" href="http://blog.kmonsoor.com" title="my internet corner">kmonsoor's online hub</a>
            <ul class="nav">
<li ><a href="/">Home</a></li>
<li ><a href="/category/tech/">Tech</a></li>
                  <li ><a href="http://blog.kmonsoor.com/about/">About</a></li>
            </ul>
              <form class="navbar-search pull-right" action="http://blog.kmonsoor.com/search.html" onsubmit="return validateForm(this.elements['q'].value);">
                <input type="text" name="q" id="tipue_search_input" class="search-query span2" placeholder="Search" required/>
                <i class="fa fa-search fa-fw"></i>
              </form>
          </div>
        </div>
      </header>

      <section>

        <div class="row">
          <div class=" span9  ">
  <h1>
    <a href="http://blog.kmonsoor.com/generate-er-diagram-from-sql-database/" rel="bookmark" title="Permalink to [Step-by-step][How to] Generate ER diagram from a PostgreSQL (or any) database">[Step-by-step][How to] Generate <span class="caps">ER</span> diagram from a PostgreSQL (or any)&nbsp;database</a>
  </h1>
          </div>
        </div>

        <div class="row">


          <div class=" span9 " id="content" role="main">
  

  <div>
    <p>When you are &#8220;study&#8221;-ing (for whatever reason) someone else&#8217;s database, and the database has more than 20 tables, you are in trouble to understand what goes&nbsp;where.</p>
<p>Now, imagine a database with 300+ tables. It&#8217;s like spaghetti, but not enjoyable. Rather,&nbsp;horrific.</p>
<p>I faced a similar challenge recently with a database of 250+ tables. Yes, i felt like in a deep sh*t. And, started looking for tools which can describe the tables in at least decent <span class="caps">ER</span>-diagram. If anything more, better. And, obviously free as my company is not&nbsp;paying. </p>
<p>Then, I found <a href="http://schemaspy.sourceforge.net/">SchemaSpy</a>, originally authored by <a href="https://sites.google.com/site/johncurrier/">John Currier</a>. It generate a complete in-depth <span class="caps">HTML</span>-based description (of course, including clickable <span class="caps">ER</span>-diagram) of the database, which you can then browse with your browser. My this post is on it&#8217;s basic&nbsp;usage.</p>
<p>The output will be kind of like this:
<img alt="schemapy output sample" src="https://googledrive.com/host/0B_IybRcQsDwaTGduUi1jR3h6aDQ/blog/schemapy_sample.png" /></p>
<p>It is based on Java technologies, but can work its magic on most of the major database technologies. But, you would need a appropriate <span class="caps">JDBC</span> connector for that&nbsp;database. </p>
<p>Quote from the&nbsp;author:</p>
<blockquote>
<p>SchemaSpy uses <span class="caps">JDBC</span>&#8217;s database metadata extraction services to gather the majority of its information, but has to make vendor-specific <span class="caps">SQL</span> queries to gather some information such as the <span class="caps">SQL</span> associated with a view and the details of check&nbsp;constraints.</p>
</blockquote>
<p>In this post, as example, i have shown to use it with PostgreSQL. But, it&#8217;s not the only one supported. You can use ot with any proper <span class="caps">RDBMS</span> system as long as it has a <span class="caps">JDBC</span>-connector. 
 Now, to use it, you need these&nbsp;staffs.</p>
<ul>
<li><strong>First of all</strong>, your system should have <strong>Java runtime</strong> properly installed. <a href="http://java.com/en/download/manual.jsp">Download from&nbsp;here.</a></li>
<li><strong>SchemaSpy, which is a .jar file</strong>. <a href="http://sourceforge.net/projects/schemaspy/files/">Get it here</a>. 
    At the time of writing, it was version&nbsp;5.0.0.</li>
<li><strong><span class="caps">JDBC</span> connector to PostgreSQL</strong>. Make sure to match your PostgreSQL version. You can <a href="http://jdbc.postgresql.org/download.html">download it from here</a>.<br />
    You can check your PostgreSQL version by executing: <code>SELECT version();</code> query on <strong><em>psql</em></strong>&nbsp;prompt.</li>
<li>Also, SchemaSpy depends on <strong>GarphViz</strong> to generate the <span class="caps">ER</span>-diagrams, so you need to be installed it on your system. Get it from&nbsp;here.(http://www.graphviz.org/Download..php)</li>
<li>And, of course make sure PostgreSQL instance running <span class="amp">&amp;</span> serving the database you are trying to&nbsp;visualize.</li>
</ul>
<p>Quoting from the&nbsp;author:</p>
<blockquote>
<p>SchemaSpy uses the dot executable from <a href="http://www.graphviz.org/">Graphviz</a> to generate graphical  representations of the table/view relationships. This was initially added for people who see things visually. Now the graphical representation of relationships is a fundamental feature of the&nbsp;tool.  </p>
<p>Graphviz is not required to view the output generated by SchemaSpy, but <strong>the dot program should be in your <span class="caps">PATH</span></strong> (not <span class="caps">CLASSPATH</span>) when  running SchemaSpy or none of the entity relationship diagrams will be generated (or use the <a href="http://schemaspy.sourceforge.net/#gvparam"><code>-gv</code></a>&nbsp;option).</p>
</blockquote>
<p>For convenience, i kept the .jar files (<span class="caps">JDBC</span>-connector, and SchemaSpy) in my home folder.<br />
Now, in my case, My <span class="caps">OS</span> is Linux, my <span class="caps">DB</span>-host address is: 127.0.0.1, running PostgreSQL-9.3 at port 5432 . So, i run the command like&nbsp;this:</p>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%">  $ java -jar ./schemaSpy_5.0.0.jar -t pgsql -host 127.0.0.1:5432 -db your_database_name \
                                    -u your_DB_user_name -p your_password -s public \
                                    -dp ./postgresql-9.3-1102.jdbc3.jar 
                                    -o output_folder
</pre></div>


<p>It may take a little while, depending on the size of the schema of the database.<br />
After that, you will find the output folder/directory named <code>output_folder</code>.<br />
You&#8217;ll see some output when the magic is going on, like&nbsp;this.</p>
<div class="codehilite" style="background: #202020"><pre style="line-height: 125%">  Using database properties: [./schemaSpy_5.0.0.jar]/net/sourceforge/schemaspy/dbTypes/pgsql.properties 
  Gathering schema details................(6sec) 
  Writing/graphing summary......(2sec) 
  Writing/diagramming details..........................(31sec) 
  Wrote relationship details of 113 tables/views to directory &#39;output&#39; in 41 seconds. 

  View the results by opening output_folder/index.html
</pre></div>


<p>Now, start browsing the generated docs from &#8220;index.html&#8221; in the output folder.<br />
Good luck.&nbsp;:) </p>
  </div>


    <div class="comments">
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_shortname = 'kmonsoor';
        var disqus_identifier = "generate-er-diagram-from-sql-database/";
        var disqus_title = "[Step-by-step][How to] Generate ER diagram from a PostgreSQL (or any) database";
        var disqus_url = "http://blog.kmonsoor.com/generate-er-diagram-from-sql-database/";
        (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus</a>.</noscript>
    </div>

          </div>

            <div class="span3">
  <div class="well">

    <p><abbr class="fa fa-calendar" title="2014-12-18T00:00:00+06:00"> Dec. 18, 2014</abbr></p>


    <hr/>

      <p>
              <a href="http://blog.kmonsoor.com/category/tech/" rel="tag tooltip" class="label label-info" data-placement="right" data-original-title="8 articles in this category">Tech</a>
            <a href="/tag/programming/" rel="tooltip" class="label" data-placement="right" data-original-title="2 articles with this tag">programming</a>
            <a href="/tag/graphviz/" rel="tooltip" class="label" data-placement="right" data-original-title="1 article with this tag">graphviz</a>
            <a href="/tag/visualization/" rel="tooltip" class="label" data-placement="right" data-original-title="1 article with this tag">visualization</a>
            <a href="/tag/schemaspy/" rel="tooltip" class="label" data-placement="right" data-original-title="1 article with this tag">schemaspy</a>
            <a href="/tag/postgresql/" rel="tooltip" class="label" data-placement="right" data-original-title="1 article with this tag">postgresql</a>
            <a href="/tag/er-diagram/" rel="tooltip" class="label" data-placement="right" data-original-title="1 article with this tag">ER-diagram</a>
            <a href="/tag/java/" rel="tooltip" class="label" data-placement="right" data-original-title="1 article with this tag">java</a>
            <a href="/tag/rdbms/" rel="tooltip" class="label" data-placement="right" data-original-title="1 article with this tag">rdbms</a>
            <a href="/tag/schema/" rel="tooltip" class="label" data-placement="right" data-original-title="1 article with this tag">schema</a>
            <a href="/tag/dbms/" rel="tooltip" class="label" data-placement="right" data-original-title="1 article with this tag">dbms</a>
            <a href="/tag/db/" rel="tooltip" class="label" data-placement="right" data-original-title="1 article with this tag">db</a>
            <a href="/tag/diagram/" rel="tooltip" class="label" data-placement="right" data-original-title="1 article with this tag">diagram</a>
            <a href="/tag/db-schema/" rel="tooltip" class="label" data-placement="right" data-original-title="1 article with this tag">db-schema</a>
      </p>
      <hr/>


      <ul class="pager">
        <li class="previous "><a  href="http://blog.kmonsoor.com/uninstall-ie-9/" title="Uninstall Crappy and Slow Internet Explorer (IE) 9 : Revert back to IE 8"  rel="prev">← Older</a></li>
        <li class="next "><a  href="http://blog.kmonsoor.com/seven-deadly-sins-in-python-code/" title="Se7en Deadly Sins to Do in Python code"  rel="next">Newer →</a></li>
      </ul>

  </div>
              
            </div>

        </div>
      </section>

    </div>

    <!-- TODO: make footer sticky -->
    <footer class="container-fluid">
      <div class="container">
        <div class="row">

            <div class="span2">
                <h5>Social</h5>
                <ul class="unstyled">
                  <li>  <a href="http://twitter.com/KhaledMonsoor">
      <i class="fa fa-twitter"></i>
    Twitter
  </a></li>
                  <li>  <a href="http://plus.google.com/+KhaledMonsoor?rel=author">
    Google Plus
  </a></li>
                  <li>  <a href="http://www.instagram.com/kmonsoor/">
    Instagram
  </a></li>
                </ul>
            </div>
            <div class="span2">
                <h5>Professional profiles</h5>
                <ul class="unstyled">
                  <li>  <a href="https://googledrive.com/host/0B_IybRcQsDwaTGduUi1jR3h6aDQ/blog/Resume__KhaledMonsoor.pdf">
    Resume PDF
  </a></li>
                  <li>  <a href="http://careers.stackoverflow.com/kmonsoor">
    Careers 2.0
  </a></li>
                  <li>  <a href="http://linkedin.com/in/kmonsoor">
      <i class="fa fa-linkedin-square"></i>
    LinkedIn
  </a></li>
                  <li>  <a href="http://github.com/kmonsoor">
      <i class="fa fa-github"></i>
    Github
  </a></li>
                </ul>
            </div>

          <div class="span2">
            <h5>Browse content by</h5>
            <ul class="fa-ul">

                <li><a href="/category/tech/feed/atom/index.html"><i class="fa-li fa fa-rss"></i> Feed</a></li>
            </ul>
          </div>

          <div class="span2 muted">
            <h5>Copyright notice</h5>
            <p>© Copyright 2012-2015 Khaled Monsoor.</p>
          </div>

          <div class="span2 muted">
            <h5>Disclaimer</h5>
              <p>All opinions expressed in this site are my own personal opinions               and are not endorsed by, nor do they represent the opinions of my               previous, current and future employers or any of its affiliates,               partners or customers.</p>
          </div>

          <div class="span2">
            <h5 class="pull-right"><a href="#" class="fa fa-arrow-up"> Back to top</a></h5>
          </div>

        </div>
      </div>

      <div class="container">
        <div class="row span12 muted text-center">
          Site generated by <a href="http://getpelican.com"> Pelican</a>.<br/>
          <a href="https://github.com/kdeldycke/plumage"> Plumage</a> theme by <a href="http://kevin.deldycke.com">Kevin Deldycke</a>.
        </div>
      </div>

    </footer>

   <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-20431143-1', 'auto');
        ga('send', 'pageview');
    </script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.0.0/jquery.magnific-popup.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.1.0/jquery.fitvids.min.js"></script>
    <script src="http://blog.kmonsoor.com/theme/js/jquery.mglass.js"></script>
    <script src="http://blog.kmonsoor.com/theme/js/application.js"></script>

  </body>
</html>